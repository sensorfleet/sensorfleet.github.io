<!-- prettier-ignore -->
{% assign is_front_page = false %}
{% if page.name == 'index.html' %}
  {% assign is_front_page = true %}
{% endif %}

{% assign use_case_pages = '' | split: '' %}
{% assign pages = site.html_pages | where: 'layout', 'use-case' | sort: 'title' %}
{% for page in pages %}
  {% unless page.name == 'index.html' %}
    {% assign use_case_pages = use_case_pages | push: page %}
  {% endunless %}
{% endfor %}

{% assign attack_detection_pages = use_case_pages | where: 'category', 'attack-detection' %}
{% assign forensic_data_pages = use_case_pages | where: 'category', 'forensic-data' %}
{% assign integrity_monitoring_pages = use_case_pages | where: 'category', 'integrity-monitoring' %}
{% assign grouped_use_case_pages = attack_detection_pages | concat: forensic_data_pages | concat: integrity_monitoring_pages %}

{% for use_case_page in grouped_use_case_pages %}
  {% if use_case_page.url == page.url %}
    {% assign current_index = forloop.index0 %}
    {% assign prev_index = current_index | minus: 1 %}
    {% assign next_index = current_index | plus: 1 %}
    {% assign prev_page = grouped_use_case_pages[prev_index] %}
    {% assign next_page = grouped_use_case_pages[next_index] %}
  {% endif %}
  {% unless prev_page %}
    {% assign prev_page = grouped_use_case_pages | last %}
  {% endunless %}
  {% unless next_page %}
    {% assign next_page = grouped_use_case_pages | first %}
  {% endunless %}
{% endfor %}

<!DOCTYPE html>
<html lang="en">
  {% include head.html %}
  <body>
    <div class="page">
      <div class="main-nav fixed-top">
        {% include navbar.html %}
        <div class="linkedin">
          {% include linkedin.html %}
        </div>
      </div>
      {% if page.name != 'index.html' %}
        <div class="go-back">
          <div class="container">
            <a class="go-back-link" href="/use-cases/#catalog">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="btn-icon"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M10 19l-7-7m0 0l7-7m-7 7h18"
                />
              </svg>
              <span>Back to use cases</span>
            </a>
          </div>
        </div>
      {% endif %}
      {{ content }}
      <div class="prev-next">
        <a
          class="prev-next-link prev-next-link-prev"
          href="{{ prev_page.url }}"
        >
          <span class="prev-next-label">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="prev-next-arrow"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M10 19l-7-7m0 0l7-7m-7 7h18"
              />
            </svg>
            <span
              >{% if is_front_page %}Read more{% else %}Previous use case{%
              endif %}</span
            >
          </span>
          <span class="prev-next-title">{{ prev_page.title }}</span>
        </a>
        <a
          class="prev-next-link prev-next-link-next"
          href="{{ next_page.url }}"
        >
          <span class="prev-next-label">
            <span
              >{% if is_front_page %}Read more{% else %}Next use case{% endif
              %}</span
            >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="prev-next-arrow"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M14 5l7 7m0 0l-7 7m7-7H3"
              />
            </svg>
          </span>
          <span class="prev-next-title">{{ next_page.title }}</span>
        </a>
      </div>
      <div class="contact">
        <div class="container">
          <div class="row">
            <div class="col-lg-4">
              <h3>Contact us</h3>
              <p>contact@sensorfleet.com</p>
              <p><a href="/privacy-policy">Privacy policy &raquo;</a></p>
              <p>
                &copy; SensorFleet Oy<br />
                Business ID: 2884312-2
              </p>
              <div class="mb-3">{% include linkedin.html %}</div>
            </div>
            <div class="col-lg-4">
              <h3>Oulu</h3>
              <p>
                SensorFleet Oy<br />
                c/o Kielo Growth Oy<br />
                Teknologiantie 18<br />
                90590 Oulu<br />
                Finland
              </p>
              <p>
                Sami Petäjäsoja<br />
                +358 40 5030745
              </p>
            </div>
            <div class="col-lg-4">
              <h3>Helsinki</h3>
              <p>
                SensorFleet Oy<br />
                Lapinlahdenkatu 16<br />
                Building 15<br />
                00180 Helsinki<br />
                Finland
              </p>
              <p>
                Simo Mäkipaja <br />
                +358 40 583 3999
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% include scripts.html %}
  </body>
</html>
